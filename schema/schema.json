{
    "$schema": "http://json-schema.org/draft-07/schema",
    "properties": {
        "submission": { "$ref": "#/definitions/submission" },
        "order": { "$ref": "#/definitions/sessionOrder" },
        "sessions": {
            "description": "The list of sessions that compose the form.",
            "type": "array",
            "items": { "$ref": "#/definitions/session" }
        }
    },
    "required": ["submission", "sessions"],
    "definitions": {
        "submission": {
            "description": "Provide the information to submit the form data.",
            "properties": {
                "url": {
                    "description": "The url of which the collected form data will be submitted to.",
                    "type": "string"
                },
                "unique": {
                    "description": "A unique answer id to decide if the form is a duplicate. (optional)",
                    "type": "string"
                }
            },
            "required": ["url"]
        },
        "order": {
            "description": "Enable alternative session orders to be presented. (optional)",
            "properties": {
                "orders": {
                    "description": "List of lists of indices of sessions to be presented in that order to be chosen randomly.",
                    "type": "array",
                    "items": { "type": "array", "items": { "type": "number" } }
                },
                "url": {
                    "description": "Non random selection of order through url provider. (optional)",
                    "type": "string"
                }
            },
            "required": ["orders"]
        },
        "session": {
            "description": "A session is a page of the form. It contains questions and can show elapsed time if requested.",
            "properties": {
                "timer": {
                    "description": "Show the remaining time the respondent has to finish the session, the respondent can still answer if he/she overtimes. If less than or equals 0, timer is not shown.",
                    "type": "number"
                },
                "questions": {
                    "description": "The questions that compose a session.",
                    "type": "array",
                    "items": { "$ref": "#/definitions/question" }
                }
            },
            "required": ["timer", "questions"]
        },
        "question": {
            "description": "A may contain text, videos and elements to record respondents answers.",
            "properties": {
                "content": {
                    "description": "The collection of elements that compose a question.",
                    "type": "array",
                    "items": { "$ref": "#/definitions/content" }
                }
            },
            "required": ["content"]
        },
        "content": {
            "description": "A unit of content that composes a question. It can be markdown text, a video or a answer element.",
            "anyOf": [
                {
                    "properties": { "text": { "description": "A unit of markdown text.", "type": "string" } },
                    "required": ["text"]
                },
                {
                    "properties": { "video": { "description": "A unit of video.", "type": "string" } },
                    "required": ["video"]
                },
                {
                    "properties": { "answer": { "$ref": "#/definitions/answer" } },
                    "required": ["answer"]
                }
            ]
        },
        "answer": {
            "description": "An answer element that will be collected and submitted by the form.",
            "properties": {
                "id": {
                    "description": "The answer id, it must be unique among all other answers of all questions and sessions.",
                    "type": "string"
                },
                "required": {
                    "description": "Indicates if the the answer element must be answered to proceed.",
                    "type": "boolean"
                },
                "type": {
                    "description": "The type of answer to be rendered.",
                    "anyOf": [
                        { "properties": { "short": { "$ref": "#/definitions/shortAnswer" } } },
                        { "properties": { "long": { "$ref": "#/definitions/longAnswer" } } },
                        { "properties": { "multi": { "$ref": "#/definitions/multiAnswer" } } },
                        { "properties": { "likert": { "$ref": "#/definitions/likertAnswer" } } }
                    ]
                }
            },
            "required": ["id", "required", "type"]
        },
        "shortAnswer": {
            "description": "Short answer, accepts a single line of text.",
            "properties": {
                "placeholder": { "description": "The placeholder message", "type": "string" }
            }
        },
        "longAnswer": {
            "description": "Long answer, accepts multiple line of text.",
            "properties": {
                "placeholder": { "description": "The placeholder message", "type": "string" }
            }
        },
        "multiAnswer": {
            "description": "A list of options to be chosen.",
            "properties": {
                "options": {
                    "description": "The options that can be chosen",
                    "type": "array",
                    "items": {
                        "description": "A single option.",
                        "type": "string"
                    }
                }
            },
            "required": ["options"]
        },
        "likertAnswer": {
            "description": "A list of numbered options to be chosen with only the first and last elements labeled.",
            "properties": {
                "first": {
                    "description": "The first label",
                    "type": "string"
                },
                "last": {
                    "description": "The last label",
                    "type": "string"
                },
                "size": {
                    "description": "The amount of options",
                    "type": "number"
                }
            },
            "required": ["first", "last"]
        }
    }
}
